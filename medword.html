<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MedWordle ‚Äî Daily EMS Term</title>
  <link rel="icon" href="data:," />
  <style>
    :root{
      --bg:#0b0f14; --panel:#111827; --grid:#0f1624; --text:#eaf2ff; --muted:#9fb0c7;
      --accent1:#60a5fa; --accent2:#22d3ee; --good:#10b981; --warn:#f59e0b; --bad:#ef4444; --edge:rgba(255,255,255,.12);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:radial-gradient(1200px 800px at 80% -10%, rgba(34,211,238,.18), transparent),
                              radial-gradient(1000px 700px at -20% 120%, rgba(96,165,250,.18), transparent), var(--bg);
      color:var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial, sans-serif;
    }
    .wrap{max-width:780px;margin:0 auto;padding:28px 16px 60px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
    .title{display:flex;align-items:center;gap:12px}
    .logo{width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,var(--accent1),var(--accent2));
      display:grid;place-items:center;box-shadow:0 10px 30px rgba(34,211,238,.2)}
    .logo:before{content:"‚öïÔ∏è";font-size:22px}
    h1{font-size:22px;line-height:1.1;margin:0}
    .subtitle{font-size:13px;color:var(--muted)}

    .streak{display:flex;align-items:center;gap:8px;background:rgba(255,255,255,.04);border:1px solid var(--edge);
      padding:10px 12px;border-radius:14px}
    .streak .num{font-weight:700}

    .panel{background:rgba(255,255,255,.04);border:1px solid var(--edge);border-radius:18px;padding:18px}

    .grid{display:grid;grid-template-columns:repeat(5, 1fr);gap:10px;justify-content:center;max-width:420px;margin:18px auto}
    .cell{aspect-ratio:1/1;border-radius:10px;background:var(--grid);border:1px solid var(--edge);display:grid;place-items:center;font-weight:700;font-size:28px;text-transform:uppercase}
    .cell.filled{border-color:rgba(255,255,255,.35)}
    .cell.reveal{transition:background .25s ease, transform .15s ease;transform:scale(1.02)}
    .ok{background:#14532d;border-color:#14532d}
    .near{background:#7a4b07;border-color:#7a4b07}
    .no{background:#3b1d1d;border-color:#3b1d1d;color:#a6b0bf}

    .keyboard{display:grid;gap:8px;grid-template-columns:repeat(10, minmax(0,1fr));max-width:720px;margin:24px auto 8px}
    .key{padding:12px 0;border-radius:10px;background:#1f2937;border:1px solid var(--edge);text-transform:uppercase;font-weight:700;text-align:center;cursor:pointer;user-select:none}
    .key[data-wide="1"]{grid-column: span 2}
    .key.ok{background:#14532d;border-color:#14532d}
    .key.near{background:#7a4b07;border-color:#7a4b07}
    .key.no{background:#3b1d1d;border-color:#3b1d1d;color:#a6b0bf}

    .row{display:flex;gap:8px;justify-content:center}

    .bar{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-top:8px}
    .btn{background:linear-gradient(135deg,var(--accent1),var(--accent2));border:none;color:#07131f;padding:10px 14px;font-weight:700;border-radius:12px;cursor:pointer}
    .btn.secondary{background:#1f2937;border:1px solid var(--edge);color:var(--text)}
    .hint{font-size:14px;color:var(--muted);margin-top:4px}

    .toast{position:fixed;left:50%;top:18px;transform:translateX(-50%);background:#111827;border:1px solid var(--edge);
      padding:10px 14px;border-radius:12px;color:var(--text);box-shadow:0 10px 30px rgba(0,0,0,.35);opacity:0;pointer-events:none;transition:opacity .2s ease}
    .toast.show{opacity:1}

    footer{margin-top:20px;text-align:center;color:var(--muted);font-size:12px}
    a{color:#7dd3fc}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">
        <div class="logo"></div>
        <div>
          <h1>MedWordle</h1>
          <div class="subtitle">A daily EMS medical terminology mini‚Äëgame</div>
        </div>
      </div>
      <div class="streak" id="streakBox" title="Your daily streak">
        <span>üî•</span> <span>Streak:</span> <span class="num" id="streakNum">0</span>
      </div>
    </header>

    <section class="panel">
      <div class="bar">
        <div>
          <strong id="dateLabel"></strong>
          <div class="hint" id="hintLine">Guess today‚Äôs 5‚Äëletter EMS term in 6 tries.</div>
        </div>
        <div class="row">
          <button class="btn secondary" id="hintBtn" title="Reveal a short hint">Hint</button>
          <button class="btn secondary" id="howBtn" title="How to play">How</button>
          <button class="btn" id="shareBtn" title="Share result">Share</button>
        </div>
      </div>

      <div id="board" class="grid" aria-label="Guess grid"></div>

      <div id="kb"></div>
    </section>

    <footer>
      Built for DailyEMSQuiz ‚Ä¢ Terms curated for EMS learners ‚Ä¢ <a href="#" id="reset">Reset</a>
    </footer>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

<script>
// ========= Word Bank =========
// 5‚Äëletter EMS/medical terms + simple learner‚Äëfriendly definitions
const WORDS = [
  ["EDEMA","Swelling from fluid buildup"],
  ["SHOCK","Life‚Äëthreatening poor perfusion"],
  ["STEMI","ST‚Äëelevation heart attack"],
  ["NARES","Nostrils (external nose openings)"],
  ["LUNGS","Organs for gas exchange"],
  ["HEART","Pump that circulates blood"],
  ["FEMUR","Thigh bone"],
  ["TIBIA","Shin bone (medial)"],
  ["RENAL","Related to the kidneys"],
  ["ULNAR","Medial forearm side/artery/nerve"],
  ["AORTA","Main artery from the heart"],
  ["VEINS","Carry blood toward the heart"],
  ["STOMA","Surgical opening to body surface"],
  ["NASAL","Relating to the nose"],
  ["ORBIT","Eye socket"],
  ["RENIN","Kidney enzyme affecting BP"],
  ["URINE","Liquid waste from kidneys"],
  ["LIVER","Organ for metabolism & detox"],
  ["SPINE","Vertebral column"],
  ["BONES","Skeletal structures"],
  ["NITRO","Nitroglycerin (angina med)"],
  ["MUCUS","Airway/lining secretion"],
  ["SEPTA","Walls/partitions (pl.)"],
  ["UTERI","Uteruses (plural)"],
  ["ILIAC","Relating to the ilium/pelvis"],
  ["ILEUS","Bowel motility stop"],
  ["ILEUM","Last part of small intestine"],
  ["ILIUM","Pelvic bone"],
  ["GONAD","Sex gland (ovary/testis)"],
  ["OVARY","Female reproductive organ"],
  ["SPERM","Male reproductive cell"],
  ["NEVUS","Mole (skin lesion)"],
  ["NEURO","Nerves/nerve system (root)"],
  ["DERMA","Skin (root/term)"],
  ["SKULL","Cranial bones"],
  ["SCALP","Skin over skull"],
  ["ULCER","Open sore"],
  ["RALES","Crackles on lung exam"],
  ["GAUZE","Medical dressing fabric"],
  ["LATEX","Rubber used in gloves"],
  ["STENT","Tube to keep vessel open"],
  ["SHUNT","Bypass/alternate flow path"],
  ["ALERT","Awake and responsive"],
  ["FETAL","Relating to the fetus"],
  ["FETUS","Developing baby (uterus)"],
  ["SEIZE","Have a seizure"],
  ["NARCS","Slang: narcotics"],
  ["PEACE","For EMS: scene safety vibe üôÇ"],
  ["PLATE","Bone growth plate / lab"],
  ["LAPSE","Loss of consciousness episode"],
  ["LAPAR","Abdominal (root)"],
  ["BRADY","Slow (prefix)"],
  ["TACHY","Fast (prefix)"],
  ["UTERI","Uteruses (pl.)"],
  ["AURAL","Relating to the ear"],
  ["ILIUS","(see ILEUS variant)"],
].filter(([w])=>w.length===5);

// Build a quick lookup for allowed guesses (you can expand this to a bigger dictionary later)
const ALLOWED = new Set(WORDS.map(([w])=>w));

// ========= Daily Word Selection =========
function yyyymmdd(d=new Date()){return d.toISOString().slice(0,10);} // YYYY-MM-DD
function seededIndex(dateStr, mod){
  // Simple deterministic hash ‚Üí index
  let h=0; for(const ch of dateStr){h=(h*31 + ch.charCodeAt(0))>>>0} return h % mod;
}
const today = yyyymmdd(new Date());
const todaysIdx = seededIndex(today, WORDS.length);
const [ANSWER, DEFN] = WORDS[todaysIdx];

// ========= State =========
const ROWS = 6, COLS = 5;
let row=0, col=0; // current cursor
let board = Array.from({length:ROWS},()=>Array(COLS).fill(""));
const tried = new Set();
const kbState = {}; // letter ‚Üí status: ok | near | no

// Streaks
const LS_KEY = "medwordle";
const saved = JSON.parse(localStorage.getItem(LS_KEY) || "{}");
if(saved.lastDate && saved.lastDate!==today && saved.playedToday===true){
  saved.streak = (saved.streak||0)+1;
}else if(saved.lastDate && saved.lastDate!==today && saved.playedToday!==true){
  saved.streak = 0;
}
saved.lastDate = today; saved.playedToday = false; saved.answer = ANSWER;
localStorage.setItem(LS_KEY, JSON.stringify(saved));

// ========= UI Build =========
const boardEl = document.getElementById('board');
const kbEl = document.getElementById('kb');
const toastEl = document.getElementById('toast');
const streakNum = document.getElementById('streakNum');
const dateLabel = document.getElementById('dateLabel');
const hintBtn = document.getElementById('hintBtn');
const howBtn = document.getElementById('howBtn');
const shareBtn = document.getElementById('shareBtn');
const hintLine = document.getElementById('hintLine');

streakNum.textContent = saved.streak || 0;
dateLabel.textContent = new Date().toLocaleDateString(undefined,{weekday:'long', month:'short', day:'numeric'});

function buildBoard(){
  boardEl.innerHTML='';
  for(let r=0;r<ROWS;r++){
    for(let c=0;c<COLS;c++){
      const cell = document.createElement('div');
      cell.className = 'cell';
      cell.id = `cell-${r}-${c}`;
      boardEl.appendChild(cell);
    }
  }
}

function buildKeyboard(){
  const layout = [
    'qwertyuiop',
    'asdfghjkl',
    'zxcvbnm'
  ];
  kbEl.innerHTML = '';
  const wrap = document.createElement('div');
  wrap.className = 'keyboard';
  const keys=[];
  for(const rowStr of layout){
    for(const ch of rowStr){
      const k=document.createElement('div');
      k.className='key'; k.textContent=ch; k.dataset.key=ch;
      keys.push(k); wrap.appendChild(k);
    }
  }
  // special keys
  const enter = document.createElement('div'); enter.className='key'; enter.dataset.key='enter'; enter.textContent='Enter'; enter.dataset.wide='1';
  const back = document.createElement('div'); back.className='key'; back.dataset.key='back'; back.textContent='‚å´'; back.dataset.wide='1';
  wrap.appendChild(enter); wrap.appendChild(back);
  kbEl.appendChild(wrap);

  wrap.addEventListener('click', (e)=>{
    const k=e.target.closest('.key'); if(!k) return; onKey(k.dataset.key);
  });
}

function toast(msg, ms=1400){
  toastEl.textContent=msg; toastEl.classList.add('show');
  clearTimeout(toastEl._t); toastEl._t=setTimeout(()=>toastEl.classList.remove('show'), ms);
}

function render(){
  for(let r=0;r<ROWS;r++){
    for(let c=0;c<COLS;c++){
      const cell=document.getElementById(`cell-${r}-${c}`);
      cell.textContent = board[r][c] || '';
      cell.classList.toggle('filled', !!board[r][c]);
    }
  }
  // keyboard coloring
  for(const [ch,state] of Object.entries(kbState)){
    const k = kbEl.querySelector(`.key[data-key="${ch}"]`);
    if(k) k.className = `key ${state}`;
  }
}

function commitRow(){
  const guess = board[row].join('').toUpperCase();
  if(guess.length<COLS){ toast('Not enough letters'); return; }
  if(!ALLOWED.has(guess)) { toast('Not in word list'); return; }
  tried.add(guess);

  // evaluate
  const answer = ANSWER;
  const ansCounts = {};
  for(const ch of answer){ ansCounts[ch]=(ansCounts[ch]||0)+1; }

  // first pass: exact matches
  const res = Array(COLS).fill('no');
  for(let i=0;i<COLS;i++){
    if(guess[i]===answer[i]){ res[i]='ok'; ansCounts[guess[i]]--; }
  }
  // second pass: near matches
  for(let i=0;i<COLS;i++){
    if(res[i]==='ok') continue;
    const ch=guess[i];
    if(ansCounts[ch]>0){ res[i]='near'; ansCounts[ch]--; }
  }

  // paint cells
  for(let c=0;c<COLS;c++){
    const cell=document.getElementById(`cell-${row}-${c}`);
    cell.classList.add('reveal', res[c]);
  }

  // keyboard states (prioritize ok > near > no)
  for(let i=0;i<COLS;i++){
    const ch=guess[i].toLowerCase();
    const st=res[i];
    const prev=kbState[ch];
    if(prev==='ok') continue; // keep best
    if(prev==='near' && st==='no') continue;
    kbState[ch]=st;
  }

  if(guess===answer){ endGame(true); return; }
  row++; col=0;
  if(row>=ROWS){ endGame(false); return; }
  render();
}

function endGame(win){
  saved.playedToday=true; saved.lastDate=today;
  if(win){ saved.streak=(saved.streak||0)+(saved.wonToday?0:1); saved.wonToday=true; }
  else { saved.wonToday=false; }
  localStorage.setItem(LS_KEY, JSON.stringify(saved));
  streakNum.textContent = saved.streak||0;

  const msg = win ? `‚úÖ ${ANSWER} ‚Äî ${DEFN}` : `‚ùå ${ANSWER} ‚Äî ${DEFN}`;
  toast(msg, 3200);
  // disable input
  document.removeEventListener('keydown', keyHandler);
  kbEl.style.pointerEvents='none';
}

function onKey(k){
  if(k==='enter') return commitRow();
  if(k==='back'){
    if(col>0){ col--; board[row][col]=''; render(); }
    return;
  }
  if(/^[a-z]$/.test(k)){
    if(col<COLS){ board[row][col]=k.toUpperCase(); col++; render(); }
  }
}

function keyHandler(e){
  if(e.key==='Enter') onKey('enter');
  else if(e.key==='Backspace') onKey('back');
  else if(/^[a-zA-Z]$/.test(e.key)) onKey(e.key.toLowerCase());
}

// Buttons
hintBtn.addEventListener('click', ()=>{
  hintLine.textContent = `Hint: ${DEFN}`;
});
howBtn.addEventListener('click', ()=>{
  toast('Guess the 5‚Äëletter EMS term in 6 tries. Green=correct spot, Orange=letter in word, Gray=not in word.');
});
shareBtn.addEventListener('click', async()=>{
  // Build emoji grid for sharing
  let rows='';
  const cells = boardEl.querySelectorAll('.cell');
  for(let r=0;r<ROWS;r++){
    let line='';
    for(let c=0;c<COLS;c++){
      const cell=document.getElementById(`cell-${r}-${c}`);
      if(!cell.classList.contains('reveal')) continue;
      if(cell.classList.contains('ok')) line+='üü©';
      else if(cell.classList.contains('near')) line+='üüß';
      else line+='‚¨õ';
    }
    if(line) rows += line+"\n";
  }
  const text = `MedWordle ${today} \n${rows}\n${saved.wonToday?`Solved (${row+1}/${ROWS})`:'Unsolved'} ‚Äî ${ANSWER}`;
  try{
    await navigator.clipboard.writeText(text);
    toast('Result copied to clipboard');
  }catch{
    toast('Copy failed');
  }
});

document.getElementById('reset').addEventListener('click',(e)=>{
  e.preventDefault(); localStorage.removeItem(LS_KEY); location.reload();
});

// Init
buildBoard(); buildKeyboard(); render();
document.addEventListener('keydown', keyHandler);

</script>
</body>
</html>
